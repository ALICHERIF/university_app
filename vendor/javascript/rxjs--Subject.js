import"./util/root.js";import"./symbol/observable.js";import"./util/isFunction.js";import"./util/isArray.js";import"./util/isObject.js";import"./util/errorObject.js";import"./util/tryCatch.js";import"./util/UnsubscriptionError.js";import t from"./Subscription.js";import r from"./symbol/rxSubscriber.js";import"./Observer.js";import e from"./Subscriber.js";import"./util/toSubscriber.js";import s from"./Observable.js";import i from"./SubjectSubscription.js";import o from"./util/throwError.js";import n from"./util/ObjectUnsubscribedError.js";var u={};var c=u&&u.__extends||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);function __(){this.constructor=t}t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)};var b=s;var p=e;var h=t;var a=i;var l=r;var f=o;var j=n;var S=function(t){c(Subject,t);function Subject(r,e){t.call(this);this.destination=r;this.source=e;this.observers=[];this.isUnsubscribed=false;this.isStopped=false;this.hasErrored=false;this.dispatching=false;this.hasCompleted=false;this.source=e}Subject.prototype.lift=function(t){var r=new Subject(this.destination||this,this);r.operator=t;return r};Subject.prototype.add=function(t){return h.Subscription.prototype.add.call(this,t)};Subject.prototype.remove=function(t){h.Subscription.prototype.remove.call(this,t)};Subject.prototype.unsubscribe=function(){h.Subscription.prototype.unsubscribe.call(this)};Subject.prototype._subscribe=function(t){if(this.source)return this.source.subscribe(t);if(!t.isUnsubscribed){if(this.hasErrored)return t.error(this.errorValue);if(this.hasCompleted)return t.complete();this.throwIfUnsubscribed();var r=new a.SubjectSubscription(this,t);this.observers.push(t);return r}};Subject.prototype._unsubscribe=function(){this.source=null;this.isStopped=true;this.observers=null;this.destination=null};Subject.prototype.next=function(t){this.throwIfUnsubscribed();if(!this.isStopped){this.dispatching=true;this._next(t);this.dispatching=false;this.hasErrored?this._error(this.errorValue):this.hasCompleted&&this._complete()}};Subject.prototype.error=function(t){this.throwIfUnsubscribed();if(!this.isStopped){this.isStopped=true;this.hasErrored=true;this.errorValue=t;this.dispatching||this._error(t)}};Subject.prototype.complete=function(){this.throwIfUnsubscribed();if(!this.isStopped){this.isStopped=true;this.hasCompleted=true;this.dispatching||this._complete()}};Subject.prototype.asObservable=function(){var t=new d(this);return t};Subject.prototype._next=function(t){this.destination?this.destination.next(t):this._finalNext(t)};Subject.prototype._finalNext=function(t){var r=-1;var e=this.observers.slice(0);var s=e.length;while(++r<s)e[r].next(t)};Subject.prototype._error=function(t){this.destination?this.destination.error(t):this._finalError(t)};Subject.prototype._finalError=function(t){var r=-1;var e=this.observers;this.observers=null;this.isUnsubscribed=true;if(e){var s=e.length;while(++r<s)e[r].error(t)}this.isUnsubscribed=false;this.unsubscribe()};Subject.prototype._complete=function(){this.destination?this.destination.complete():this._finalComplete()};Subject.prototype._finalComplete=function(){var t=-1;var r=this.observers;this.observers=null;this.isUnsubscribed=true;if(r){var e=r.length;while(++t<e)r[t].complete()}this.isUnsubscribed=false;this.unsubscribe()};Subject.prototype.throwIfUnsubscribed=function(){this.isUnsubscribed&&f.throwError(new j.ObjectUnsubscribedError)};Subject.prototype[l.$$rxSubscriber]=function(){return new p.Subscriber(this)};Subject.create=function(t,r){return new Subject(t,r)};return Subject}(b.Observable);u.Subject=S;var d=function(t){c(SubjectObservable,t);function SubjectObservable(r){t.call(this);this.source=r}return SubjectObservable}(b.Observable);const v=u.Subject;export default u;export{v as Subject};

